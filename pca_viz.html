<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Pca viz - WebMeV REST API</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Pca viz";
    var mkdocs_page_input_path = "pca_viz.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> WebMeV REST API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="general_architecture.html">Architecture</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation and Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="install.html">Preliminaries</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="mev_cluster_setup.html">Installation and setup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="setup_configuration.html">Configuration</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="api.html">Intro and core concepts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Data Structures</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="#">Resources</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="resources.html">General info</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="resource_types.html">Resource types</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="resource_metadata.html">Resource metadata</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="operation_resources.html">Operation-associated resources</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="attributes.html">Attributes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="elements.html">Observations and Features</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="observation_and_feature_sets.html">ObservationSet and FeatureSets</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="workspaces.html">Workspaces</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="metadata.html">Workspace metadata</a>
                </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="auth.html">Authentication</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="operations.html">Operation concepts</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="creating_analyses.html">Creating new analyses/operations</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="example_workflow.html">Workflow and analysis concepts</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">WebMeV REST API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
      
    
    <li>Pca viz</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/web-mev/mev-backend/edit/master/docs/pca_viz.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h3 id="pca-and-attributesgroup-visualization"><a class="toclink" href="#pca-and-attributesgroup-visualization">PCA and attributes/group visualization</a></h3>
<p>For the examples below, we consider 7 samples/Observations, which we name S1,...,S7. The <code>ObservationSet</code> underlying this could look like:</p>
<pre class="codehilite"><code>{
    &quot;multiple&quot;: true,
    &quot;elements&quot;: [
        {
            &quot;id&quot;: &quot;S1&quot;,
            &quot;attributes&quot;: {
                &quot;genotype&quot;: {&quot;attribute_type&quot;: &quot;String&quot;, &quot;value&quot;: &quot;WT&quot;}
            }
        },
        {
            &quot;id&quot;: &quot;S2&quot;,
            &quot;attributes&quot;: {}
        },
        {
            &quot;id&quot;: &quot;S3&quot;,
            &quot;attributes&quot;: {}
        },
        {
            &quot;id&quot;: &quot;S4&quot;,
            &quot;attributes&quot;: {
                &quot;genotype&quot;: {&quot;attribute_type&quot;: &quot;String&quot;, &quot;value&quot;: &quot;WT&quot;}
            }
        },
        {
            &quot;id&quot;: &quot;S5&quot;,
            &quot;attributes&quot;: {
                &quot;genotype&quot;: {&quot;attribute_type&quot;: &quot;String&quot;, &quot;value&quot;: &quot;WT&quot;}
            }
        },
        {
            &quot;id&quot;: &quot;S6&quot;,
            &quot;attributes&quot;: {
                &quot;genotype&quot;: {&quot;attribute_type&quot;: &quot;String&quot;, &quot;value&quot;: &quot;m1&quot;}
            }
        },
        {
            &quot;id&quot;: &quot;S7&quot;,
            &quot;attributes&quot;: {
                &quot;genotype&quot;: {&quot;attribute_type&quot;: &quot;String&quot;, &quot;value&quot;: &quot;m1&quot;}
            }
        }
    ]
}
</code></pre>

<p>Note that some of the samples have genotype of WT (S1,S4,S5) or m1 (S6,S7) and some do not have the "genotype" attribute defined (S2,S3). In general, there can be many more of these attributes. Some could conceivably be numbers, but we will only work with strings or bools.</p>
<p><strong>The basic PCA plot</strong>
After running the initial PCA, we don't automatically color and the figure may look like:
<img alt="" src="pca_coloring.svg" />
If there are not attributes defined, then the dropdown would not have any values to filter upon. Similarly, if the user has not previously defined any custom <code>ObservationSet</code> instances, then the bottom table ("color Observations") would not be shown.</p>
<p><strong>Coloring by attributes</strong></p>
<p>By going through the <code>attributes</code> object of each <code>Observation</code>, we can collect all the possible attribute fields (here, only "genotype"). The dropdown would be populated by that attribute name and the user can select. As shown, the samples without a "genotype" attribute are simply left grey. The others are colored.</p>
<p>Open questions (depending on complexity): 
- Can we change the legend dynamically? (as shown)
- Can we allow users to set their own colors? If so, how?</p>
<p><img alt="" src="pca_coloring2.svg" /></p>
<p><strong>Coloring by user-defined groups/<code>ObservationSet</code>s</strong></p>
<p>Instead of coloring by the "attributes", we can allow users to color by the samplesets/<code>ObservationSet</code>s they defined. <em>To avoid complexity and confusion, users can only color by attribute OR observation, NOT by both. How do we show or communicate this on the page? Radio button next to the options? Or leave it with that "OR" as shown? Ideally, if someone selects an <code>ObservationSet</code>, it will "uncolor" any attribute selection made in the dropdown.</em> </p>
<p>Open questions (depending on complexity):
- Do we add a dynamic legend inside the plot? Or just leave the users to reference the colors on the side
- Do we allow users to click on those colored rectangle to change the color? The current MEV allows the user to assign a color to each group, but I think it's fixed after that. Maybe that's the simplest? The user can then change the color for each group in the "metadata" view. </p>
<p>In this first example, only one group is selected and colored. Easy.
<img alt="" src="pca_coloring3.svg" /></p>
<p>In the more complex example, we can have samples that belong to:
- None of the groups. They remain grey.
- One of the groups. They get the group's color.
- $&gt;1$ of the groups. These get some other marker like a pattern, different-sized marker, etc. To avoid making this too complicated, just use the same markers for any sample belonging to $&gt; 1$ groups. Otherwise we have to come up with markers for each unique combination and that could get into some kind of combinatorial nightmare. </p>
<p>Below, we can imagine the two samples with the striped markers belong to both the "cntrl" and "mygroup" groups. If the user unselects "mygroup", those circles would then change to the brown color.</p>
<p><img alt="" src="pca_coloring4.svg" /></p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/web-mev/mev-backend/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
